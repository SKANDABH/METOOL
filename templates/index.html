<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesture Recognition with AI</title>
    <style>
        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
          li strong img {
      width: 1em; /* Adjust the size to match other symbols */
      height: 1em; /* Ensures a consistent height */
      vertical-align: middle; /* Aligns the image with the text baseline */
  }
        h1 {
            text-align: center;
            margin-top: 20px;
            color: #333;
        }

        /* Camera Screen */
        .camera-screen {
            position: absolute;
            top: 10%;
            left: 2%;
            width: 70%;
            height: 70%;
            border: 2px solid #ccc;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        /* Controls Container */
        .controls-container {
            margin: 20px;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 300px;
            position: absolute;
            top: 15%;
            left: 72%;
            z-index: 2;
        }

        .controls-container h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .customization-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .color-picker, .brush-size {
            display: inline-block;
        }

        /* Text Container */
        .text-container {
            position: absolute;
            top: 50%;
            right: 5%;
            padding: 20px;
            width: 20%;
        }

        #aiResponse {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            background-color: #fff;
            margin-top: 10px;
            min-height: 50px;
            line-height: 1.5;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            color: #333;
        }

        /* Upload Form */
        #uploadfm {
            position: absolute;
            top: 80%;
            width: 100%;
            text-align: center;
        }

        #toggle-voice {
            position: absolute;
            top: 2%;
        }


header {
    background-color: #2C3E50;
    padding: 4px;
<!--    border-radius: 10px;-->
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    text-align: center;
    max-width: 1300px;
    width: 100%;
height: auto;
}

/* Heading styling */
h1 {
    font-size: 1rem;
    font-weight: 700;
    color: white;
    text-transform: uppercase;
    letter-spacing: 2px;
    line-height: 1.4;
    word-wrap: break-word;
}

/* Add a smooth transition on hover for the heading */
h1:hover {
    color: #1ABC9C;
    transform: scale(1.05);
    transition: color 0.3s ease, transform 0.3s ease;
}

#openPopupButton{
position:absolute;
 background-color: green;
 right:-10rem;}


.container {
position:absolute;
left:85%;
top:1%;
    max-width: 80px;
    margin: 20px auto;
    text-align: center;
}

button {
    background-color: #007BFF;
    color: white;
    padding: 10px 10px;
    font-size: 10px;
    border: none;
    cursor: pointer;
    border-radius: 5px;
}
#toggle-voice{position:absolute;
top:80%;
left:1.5rem;}
button:hover {
    background-color: #0056b3;
}

.popup {
    display: none; /* Hidden by default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 1000;
    padding: 20px;
}

.popup-content {
    background-color: white;
    margin: 5% auto;
    padding: 20px;
    border-radius: 10px;
    position: relative;
    max-width: 500px;

    max-height: 80%; /* Limit the height of the popup */
    overflow-y: auto
}

.close-btn {
    position: absolute;
    top: 20px;
    right: 7px;
    font-size: 17px;
    color: #333;
    cursor: pointer;
}

.blackboard-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 70rem;
<!--            background-color: rgba(0, 0, 0, 0.7); /* Darker overlay */-->
            display: none;
            justify-content: center;
            align-items: center;
             z-index: 1000;
        }
        .blackboard-popup {
            background: #34495e; /* Darker popup background */
            width: 80%;
            height: 70rem;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            text-align: center;
            overflow: hidden;
<!--             z-index: 1000;-->
        }
        .blackboard-popup iframe {
            width: 100%;
            height: 100%;
            border: none;
<!--             z-index: 1000;-->
        }
        .blackboard-close-btn {

            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            position: absolute;
            top: 10px;
            right: 10px;
        }
        .blackboard-close-btn:hover {
            background-color: #c0392b;
        }
        .blackboard-open-btn {
            background-color: #16a085;
            position:absolute;
            top:90%;
            color: white;
            cursor: pointer;
            font-size: 12px;

        }
        .blackboard-open-btn:hover {
            background-color: #1abc9c;
        }


h2 {
    margin-bottom: 20px;
}

.gesture-list {
    text-align: left;
}

.gesture-list ul {
    list-style-type: none;
    padding: 0;
}

.gesture-list li {
    margin: 10px 0;
}

.flag-toggle {
    margin-top: 20px;
}

#flagToggleCheckbox {
    margin-left: 10px;
}

#flagStatusText {
    font-weight: bold;
    margin-left: 10px;
}

#flagStatusText.enabled {
    color: green;
}

#flagStatusText.disabled {
    color: red;
}

        /* Responsive Design */
        @media (max-width: 768px) {
            .camera-screen {
                width: 100%;
                height: 50%;
            }

            .text-container, .controls-container {
                position: relative;
                width: 90%;
                margin: auto;
                top: auto;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>GENERATIVE AI POWERED MODERN EDUCATION TOOL TO ENHANCE TEACHING-LEARNING EXPERIENCE</h1>
    </header>

    <!-- Camera Feed -->
    <img src="{{ url_for('video_feed') }}" class="camera-screen" alt="Camera Feed">

    <!-- Gesture Tool Customization -->
    <div class="controls-container">
        <h3>Gesture Tool Customization</h3>
        <div class="customization-panel">
            <div class="color-picker">
                <label for="color">Color:</label>
                <input type="color" id="color" value="#ff0000" onchange="updateGestureTool()">
            </div>
            <div class="brush-size">
                <label for="brushSize">Brush Size:</label>
                <input type="range" id="brushSize" min="1" max="10" value="5" onchange="updateGestureTool()">
            </div>
        </div>
    </div>

    <!-- AI Response -->
    <div class="text-container">
        <h3>AI Response:</h3>
        <p id="aiResponse">Awaiting response...</p>
    </div>

    <!-- File Upload -->
    <div id="uploadfm">
        <h3>Upload a PowerPoint File Hereüëáüèº</h3>
        <form id="uploadForm" method="POST" enctype="multipart/form-data">
            <input type="file" name="file" id="ppt_file">
            <button type="submit">Upload</button>
        </form>
    </div>

    <!-- Toggle Voice Button -->
    <button id="toggle-voice">Enable Chalk Board Voice</button>
 <div class="container">


        <!-- Button to open popup -->
        <button id="openPopupButton" onclick="openPopup()">Help</button>

        <!-- Popup content -->
        <div id="gesturePopup" class="popup">
            <div class="popup-content">
                <span id="closePopupButton" class="close-btn" onclick="closePopup()">&times;</span>
                <h2 id="gestureHeader">Hand Gesture Symbols and Their Actions</h2>
                <div id="gestureList" class="gesture-list">
                    <ul>
                            <li><strong id="gesture1">‚úä</strong> - Remove Canvas</li>
                            <li><strong id="gesture2">ü§ôÔ∏è</strong> - Remove text on canvas</li>
                            <li><strong id="gesture3"><img src="{{ url_for('static', filename='images/fore.png') }}" ></strong> - To Draw on Canvas</li>
                            <li><strong id="gesture4">üëå</strong> - Accept the suggestion</li>
                            <li><strong id="gesture5">ü§ü</strong> - Get AI Responce</li>
                            <li><strong id="gesture6"><img src="{{ url_for('static', filename='images/4finger.png') }}" ></strong> - Reject the suggestion</li>
                        </ul>
                    <h2 id="gestureHeader">Voice commands</h2>
                      <ul>
                          can you play
                          search in wikipedia
                        <li><strong id="cmd1"></strong> - Wake up Nova</li>
                        <li><strong id="cmd2"></strong> - Open Notepad</li>
                        <li><strong id="cmd3"></strong> - Open Calculator</li>
                        <li><strong id="cmd5"></strong> - Get AI Responce</li>
                        <li><strong id="cmd6"></strong> - Open Wikipedia</li>
                          <li><strong id="cmd7"></strong> - can you search for</li>
                          <li><strong id="cmd7"></strong> - can you play</li>
                          <li><strong id="cmd7"></strong> - search in wikipedia</li>
                          <li><strong id="cmd4"></strong> - Power point(Start Presentation,
                         forward -for next slide
                          backward -for prev slide
                          exit </li>





                    </ul>
                     <h2 id="gestureHeader">Commands for Notepad</h2>
    <ul>
        <li><strong>Open Notepad</strong> - Opens the Notepad application.</li>
        <li><strong>Type</strong> - Types the words in Notepad.</li>
        <li><strong>Save it</strong> - Saves the document in Notepad and stops typing.</li>
        <li><strong>Close Notepad</strong> - Closes the Notepad application.</li>
        <li><strong>Clear Text</strong> - Clears all the text in the Notepad.</li>
    </ul>

    <h2 id="gestureHeader">Commands for Calculator</h2>
    <ul>
        <li><strong>Open Calculator</strong> - Opens the Calculator application.</li>
        <li><strong>Add</strong> - Performs addition on the Calculator.</li>
        <li><strong>Subtract</strong> - Performs subtraction on the Calculator.</li>
        <li><strong>Multiply</strong> - Performs multiplication on the Calculator.</li>
        <li><strong>Divide</strong> - Performs division on the Calculator.</li>
        <li><strong>Clear</strong> - Clears the Calculator's current input.</li>
        <li><strong>Close Calculator</strong> - Closes the Calculator application.</li>
    </ul>

    <h2 id="gestureHeader">Commands for PowerPoint</h2>
    <ul>
        <li><strong>Start Presentation</strong> - Starts the PowerPoint slideshow.</li>
        <li><strong>Next Slide</strong> - Moves to the next slide in the presentation.</li>
        <li><strong>Previous Slide</strong> - Moves to the previous slide in the presentation.</li>
        <li><strong>End Presentation</strong> - Ends the PowerPoint slideshow.</li>
        <li><strong>Exit PowerPoint</strong> - Exits the PowerPoint application.</li>
        <li><strong>Pause Slideshow</strong> - Pauses the current PowerPoint presentation.</li>
    </ul>


                </div>


            </div>
        </div>
    </div>
    <button class="blackboard-open-btn" onclick="openBlackboardPopup()">Open Blackboard Overlay with Link</button>

    <div class="blackboard-overlay" id="blackboardOverlay">
        <div class="blackboard-popup">
            <button class="blackboard-close-btn" onclick="closeBlackboardPopup()">Close</button>
            <h2>External Website in Blackboard Popup</h2>
            <iframe src="https://dummy-board123.vercel.app/" sandbox="allow-scripts allow-same-origin" width="100%" height="500px"></iframe>

        </div>
    </div>

    <script>
        let debounceTimer;
        function debounce(func, delay) {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(func, delay);
        }
        let flag = 0;

        // Toggle Voice Functionality
        document.getElementById('toggle-voice').addEventListener('click', function () {
            flag = 1 - flag;
            this.textContent = flag === 1 ? 'Disable Voice' : 'Enable Voice';

            fetch('/toggle_voice', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ flag: flag })
            }).then(response => response.json())
            .then(data => console.log(data.message))
            .catch(error => console.error('Error:', error));
        });

        // Update Gesture Tool Settings
        function updateGestureTool() {
            const color = document.getElementById('color').value;
            const brushSize = document.getElementById('brushSize').value;

            fetch('/update_tool_settings', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ color, brush_size: brushSize })
            }).then(response => response.json())
            .then(data => console.log("Gesture tool updated:", data))
            .catch(error => console.error("Error updating gesture tool:", error));
        }


        document.getElementById('uploadForm').addEventListener('submit', function(event) {
        event.preventDefault();

        var fileInput = document.getElementById('ppt_file');
        var formData = new FormData();
        formData.append('file', fileInput.files[0]);

        fetch('/upload', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => console.log(data))
        .catch(error => console.error('Error:', error));
    });



<!--        ___________________________________HelpToggle-->
        function openPopup() {
    document.getElementById("gesturePopup").style.display = "block";
}

// Function to close the popup
function closePopup() {
    document.getElementById("gesturePopup").style.display = "none";
}

// Function to toggle the flag for Nova or Chalkboard command
function toggleFlag() {
    const flagToggleCheckbox = document.getElementById("flagToggleCheckbox");
    const flagStatusText = document.getElementById("flagStatusText");

    if (flagToggleCheckbox.checked) {
        flagStatusText.textContent = "Enabled";
        flagStatusText.classList.add("enabled");
        flagStatusText.classList.remove("disabled");
        // You can add code here to enable Nova or Chalkboard functionality
        console.log("Flag is enabled");
    } else {
        flagStatusText.textContent = "Disabled";
        flagStatusText.classList.add("disabled");
        flagStatusText.classList.remove("enabled");
        // You can add code here to disable Nova or Chalkboard functionality
        console.log("Flag is disabled");
    }
}
<!--        for popup black board-->

         function openBlackboardPopup() {
            document.getElementById('blackboardOverlay').style.display = 'flex';
        }

        function closeBlackboardPopup() {
            document.getElementById('blackboardOverlay').style.display = 'none';
        }

          async function updateText() {
            try {
                const response = await fetch('/get_voice_input');
                const data = await response.json();
                document.getElementById('aiResponse').innerText = data.ai_response || "No response received.";
            } catch (error) {
                console.error("Error fetching AI response:", error);
                document.getElementById('aiResponse').innerText = "Error retrieving response.";
            }
        }
  setInterval(() => debounce(updateText, 200), 2000);
    </script>
</body>
</html>
